var bcSfFilterSettings={general:{limit:bcSfFilterConfig.custom.products_per_page,loadProductFirst:!0},template:{loadMoreLoading:'<div id="bc-sf-filter-load-more-loading"><div class="load-more__icon" style="width: 44px; height: 44px; opacity: 1;"></div></div>'}};var bcSfFilterTemplate={saleLabelHtml:'<div class="sale_banner thumbnail_banner">'+bcSfFilterConfig.label.sale+"</div>",newLabelHtml:'<div class="new_banner thumbnail_banner">'+bcSfFilterConfig.label.new+"</div>",preorderLabelHtml:'<div class="new_banner thumbnail_banner">'+bcSfFilterConfig.label.pre_order+"</div>",quickViewBtnHtml:'<span data-fancybox-href="#product-{{itemId}}" class="quick_shop ss-icon" data-gallery="product-{{itemId}}-gallery">&#x002B;</span>',newRowHtml:'<br class="clear product_clear" />',productGridItemHtml:'<div class="{{itemColumnNumberClass}} {{itemCollectionGroupThumbClass}} thumbnail {{itemCollectionGroupSmallClass}}" itemprop="itemListElement" itemscope itemtype="http://schema.org/Product"">'+'<div class="product-wrap">'+'<div class="relative product_image swap-'+bcSfFilterConfig.custom.secondary_image+'">'+'<a href="{{itemUrl}}" itemprop="url">'+"{{itemImages}}"+"</a>"+'<div class="thumbnail-overlay">'+'<a href="{{itemUrl}}" itemprop="url" class="hidden-product-link">{{itemTitle}}</a>'+'<div class="info">'+"{{itemProductInfoHover}}"+"</div>"+"</div>"+'<div class="banner_holder">'+"{{itemSaleLabel}}"+"{{itemNewLabel}}"+"{{itemPreorderLabel}}"+"</div>"+"</div>"+'<a class="product-info__caption {{itemHiddenClass}}" href="{{itemUrl}}" itemprop="url">'+"{{itemProductInfo}}"+"</a>"+"</div>"+"{{itemColorSwatches}}"+"</div>",previousHtml:'<span class="prev"><a href="{{itemUrl}}">« '+bcSfFilterConfig.label.paginate_prev+"</a></span>",nextHtml:'<span class="next"><a href="{{itemUrl}}">'+bcSfFilterConfig.label.paginate_next+" »</a></span>",pageItemHtml:'<span class="page"><a href="{{itemUrl}}">{{itemTitle}}</a></span>',pageItemSelectedHtml:'<span class="page current">{{itemTitle}}</span>',pageItemRemainHtml:"<span>{{itemTitle}}</span>",paginateHtml:"{{previous}}{{pageItems}}{{next}}",sortingHtml:"{{sortingItems}}"};function buildItemCollectionGroupThumbClass(e,t){var i=e<t?e:e%t;return 0==i?"omega":1==i?"alpha":""}function clearFilterOption(e,t,i){if(e.preventDefault(),bcsffilter.internalClick=!0,bcsffilter.queryParams.hasOwnProperty(i))switch(i){case"pf_t_brand":jQ(".bc-sf-filter-clear-all").trigger("click");break;case"pf_t_model":var a=window.location.href;var r=window.location.search;var l=a.replace(r,"?_=pf&pf_t_brand="+encodeURIParamValue(bcsffilter.queryParams["pf_t_brand"][0]));console.log(l),bcsffilter.onChangeData(l,"clearFilterOptions");break;default:var l;l=clearUrlParams(l=window.location.href.split("?")[0],i),bcsffilter.onChangeData(l,"clearFilterOptions")}}function clearUrlParams(e,t){if(console.log(window.location.search),window.location.search.length){var i=[];var a=[];for(var r,l=0,n=window.location.search.substr(1).split("&");l<n.length;l++)if((r=n[l].split("=")).length>1){var o=r[0];var s=r[1];o!=t&&"_"!=o&&o!=t+"_and_condition"&&o!=t+"_show_exact_rating"&&(o.indexOf("pf_")>-1?i.push(o+"="+s):"page"!=o&&a.push(o+"="+s))}(i.length>0||a.length>0)&&(a.length>0?(e+="?",e+=a.join("&"),i.length>0&&(e+="&_="+bcsffilter.prefix+"&"+i.join("&"))):i.length>0&&(e+="?_="+bcsffilter.prefix+"&"+i.join("&")))}return t.indexOf("pf_c_")>-1&&(e=removeCollectionScopeParamFromUrl(e)),e}function buildDefaultLink(e,t){var i=window.location.href.split("?")[0];return i+="?"+e+"="+t}function getFilePath(e,t,i){var a=bcsffilter;var t="undefined"!=typeof t?t:"png";var i="undefined"!=typeof i?i:"1";var r=a.fileUrl.lastIndexOf("?");if(r>0)var l=a.fileUrl.substring(0,r);else var l=a.fileUrl;return l+=e+"."+t+"?v="+i}BCSfFilter.prototype.buildProductGridItem=function(e,t){var i=e.images_info;var a=!e.available;var r=e.compare_at_price_min>e.price_min;var l=e.price_min!=e.price_max;var n=e["variants"][0];if(null!==getParam("variant")&&""!=getParam("variant")){var o=e.variants.filter((function(e){return e.id==getParam("variant")}));"undefined"!=typeof o[0]&&(n=o[0])}else for(var s=0;s<e["variants"].length;s++)if(e["variants"][s].available){n=e["variants"][s];break}var c=bcSfFilterTemplate.productGridItemHtml;var p=r?"sale":"";var m=a?"out_of_stock OutOfStock":"in_stock InStock";var f="";var u=buildItemCollectionGroupThumbClass(t,bcSfFilterConfig.custom.products_per_row);var g="";var d="";var h=(t-1)%2==0?"even":"odd";switch(bcSfFilterConfig.custom.products_per_row){case 2:f="eight columns";break;case 3:f="one-third column";break;case 4:f="four columns";break;case 5:f="one-fifth column";break;case 6:f="one-sixth column";break;default:f="one-seventh column";break}1==bcSfFilterConfig.custom.mobile_products_per_row?f+=" medium-down--one-half small-down--one-whole":f+=" medium-down--one-half small-down--one-half",c=(c=(c=(c=(c=c.replace(/{{itemColumnNumberClass}}/g,f)).replace(/{{itemCollectionGroupThumbClass}}/g,u)).replace(/{{itemCollectionGroupLargeClass}}/g,g)).replace(/{{itemCollectionGroupMediumClass}}/g,d)).replace(/{{itemCollectionGroupSmallClass}}/g,h);var b=a?bcSfFilterTemplate.soldOutLabelHtml:"";c=c.replace(/{{itemSoldOutLabel}}/g,b);var v=bcSfFilterConfig.custom.sale_banner_enabled&&r?bcSfFilterTemplate.saleLabelHtml:"";c=c.replace(/{{itemSaleLabel}}/g,v);var _=e.collections.filter((function(e){return"new"==e.handle}));var y=e.collections.filter((function(e){return"pre-order"==e.handle}));var S=e.collections.filter((function(e){return"coming-soon"==e.handle}));if(e.collections){var F="undefined"!=typeof _[0]?bcSfFilterTemplate.newLabelHtml:"";c=c.replace(/{{itemNewLabel}}/g,F);var w="undefined"!=typeof S[0]?bcSfFilterTemplate.comingsoonLabelHtml:"";c=c.replace(/{{itemComingsoonLabel}}/g,w);var C="undefined"!=typeof y[0]?bcSfFilterTemplate.preorderLabelHtml:"";c=c.replace(/{{itemPreorderLabel}}/g,C)}var P=bcSfFilterConfig.custom.thumbnail_hover_enabled?"hidden":"";c=c.replace(/{{itemHiddenClass}}/g,P);var k='data-src="'+this.getFeaturedImage(i,"900x")+'" ';k+='data-srcset=" '+this.getFeaturedImage(i,"300x")+" 300w,",k+=this.getFeaturedImage(i,"400x")+" 400w,",k+=this.getFeaturedImage(i,"500x")+" 500w,",k+=this.getFeaturedImage(i,"600x")+" 600w,",k+=this.getFeaturedImage(i,"700x")+" 700w,",k+=this.getFeaturedImage(i,"800x")+" 800w,",k+=this.getFeaturedImage(i,"900x")+' 900w"';var I=this.getFeaturedImage(i,"100x");var T=i.length>1?this.optimizeImage(i[1]["src"]):this.getFeaturedImage(i,"900x");var x=e.featured_image.width;var L="";if(bcSfFilterConfig.custom.align_height&&i.length>0){var j=bcSfFilterConfig.custom.collection_height;var O;x=i[0]["width"]/i[0]["height"]*j,L=i[0]["width"]>=i[0]["height"]?"width: 100%; height: auto;":"width: 100%;"}var H='<div class="image__container" style="max-width: '+x+'px;">';H+='<img src="'+I+'"'+' alt="{{itemTitle}}" '+' class="lazyload '+bcSfFilterConfig.custom.image_loading_style+'"'+' style="'+L+" max-width: "+e.featured_image.width+'px;"'+' data-sizes="auto" '+k+"/>",H+="</div>",bcSfFilterConfig.custom.secondary_image&&(H+='<div class="image__container" style="max-width:',i.length>1?H+=i[1]["width"]+'px">':H+=e.featured_image.width+'px">',H+='<img src="'+T+'" class="secondary lazyload" alt="{{itemTitle}}" />',H+="</div>"),c=c.replace(/{{itemImages}}/g,H);var Q="undefined"==typeof S?bcSfFilterConfig.label.coming_soon:this.formatMoney(n.money);var q=null!==e.description?'data-full-description="'+this.escape(e.description.split("<!-- split -->")[0])+'"':"data-full-description";var B=null!==e.description?'data-regular-description="'+this.escape(this.truncateByWord(e.description,bcSfFilterConfig.custom.description_words).replace("Description","").replace("Dimensions","").replace("Details","").replace("Specs","").replace("Shipping","").replace("Size",""))+'"':"data-regular-description";var U="";for(var V in i)U+=i[V]["src"]+"^"+e.title+"^"+i[V]["id"],V+1==i.length&&(U+="~");var D="";for(var V in e.collections)D+=e["collections"][V]["handle"],V<e.collections.length-1&&(D+=",");U=U.replace(/"/g,"&#34;");var A="";bcSfFilterConfig.custom.thumbnail_hover_enabled&&bcSfFilterConfig.custom.quick_shop_enabled||bcSfFilterConfig.custom.thumbnail_hover_enabled?A+="{{itemProductInfo}}":bcSfFilterConfig.custom.quick_shop_enabled;var E='<div class="product-details">';E+='<span class="title" itemprop="name">{{itemTitle}}</span>',E+="{{itemReview}}",E+="{{itemVendor}}",E+="{{itemPrice}}",E+="</div>",c=(c=c.replace(/{{itemProductInfoHover}}/g,A)).replace(/{{itemProductInfo}}/g,E);var M="";bcSfFilterConfig.custom.enable_shopify_review_comments&&bcSfFilterConfig.custom.enable_shopify_collection_badges&&(M='<span class="shopify-product-reviews-badge" data-id="{{itemId}}"></span>'),c=c.replace(/{{itemReview}}/g,M);var R="";bcSfFilterConfig.custom.vendor_enable&&(R='<span itemprop="brand" class="brand">'+e.vendor+"</span>"),c=c.replace(/{{itemVendor}}/g,R);var G="";"undefined"!=typeof S[0]?G+='<span class="modal_price">'+bcSfFilterConfig.label.coming_soon+"</span>":(G+='<span class="price '+p+'" itemprop="offers" itemscope itemtype="http://schema.org/Offer">',G+='<meta itemprop="price" content="'+this.formatMoney(e.price_min,this.moneyFormat)+'" />',G+='<meta itemprop="priceCurrency" content="'+bcSfFilterConfig.shop.currency+'" />',G+='<meta itemprop="seller" content="'+bcSfFilterConfig.shop.name+'" />',G+='<meta itemprop="availability" content="'+m+'" />',G+='<meta itemprop="itemCondition" content="New" />',a?G+='<span class="sold_out">'+bcSfFilterConfig.label.sold_out+"</span>":(l&&e.price_min>0&&(G+="<small><em>"+bcSfFilterConfig.label.from_price+"</em></small> "),e.price_min>0?G+='<span class="money">'+this.formatMoney(e.price_min)+"</span>":G+=bcSfFilterConfig.label.free_price),r&&(G+=' <span class="was_price"><span class="money">'+this.formatMoney(e.compare_at_price_max)+"</span></span>"),G+="</span>"),c=c.replace(/{{itemPrice}}/g,G);var z="";if(bcSfFilterConfig.custom.collection_swatches)for(var V in e.options){var N;var W=e["options"][V].toLowerCase();var $;if(["color","colour","farve"].indexOf(W)>-1){var J=V;var K=[];for(var s in z+='<div class="collection_swatches">',e.variants){var X=e["variants"][s];var Y=X["options"][J];if(-1==K.indexOf(Y)){var K=K.join(",");K=(K+=","+Y).split(",");var Z=bcSfFilterConfig.general.asset_url.replace("bc-sf-filter.js",this.slugify(Y)+".png");Z=this.optimizeImage(Z,"50x"),z+='<a href="'+this.buildProductItemUrl(e)+"?variant="+X.id+'" class="swatch" data-swatch-name="meta-'+W+"_"+Y.replace(/\s/g,"_").toLowerCase()+'">',z+="<span ",2==bcSfFilterConfig.custom.products_per_row?z+='data-image="'+this.optimizeImage(X.image,"600x")+'" ':2==bcSfFilterConfig.custom.products_per_row?z+='data-image="'+this.optimizeImage(X.image,"500x")+'" ':z+='data-image="'+this.optimizeImage(X.image,"400x")+'" ',z+='style="background-image: url('+Z+"); background-color: "+this.slugify(Y.split(" ").pop())+';">',z+="</span>",z+="</a>"}}z+="</div>"}}return c=(c=(c=(c=(c=c.replace(/{{itemColorSwatches}}/g,z)).replace(/{{itemId}}/g,e.id)).replace(/{{itemHandle}}/g,e.handle)).replace(/{{itemTitle}}/g,e.title)).replace(/{{itemUrl}}/g,this.buildProductItemUrl(e))},BCSfFilter.prototype.buildPagination=function(e){var t=parseInt(this.queryParams.page);var i=Math.ceil(e/this.queryParams.limit);if(1==i)return jQ(this.selector.pagination).html(""),!1;if("default"==this.getSettingValue("general.paginationType")){var a=bcSfFilterTemplate.paginateHtml;var r=t>1?bcSfFilterTemplate.previousHtml:"";r=r.replace(/{{itemUrl}}/g,this.buildToolbarLink("page",t,t-1)),a=a.replace(/{{previous}}/g,r);var l=t<i?bcSfFilterTemplate.nextHtml:"";l=l.replace(/{{itemUrl}}/g,this.buildToolbarLink("page",t,t+1)),a=a.replace(/{{next}}/g,l);var n=[];for(var o=t-1;o>t-3&&o>0;o--)n.unshift(o);t-4>0&&n.unshift("..."),t-4>=0&&n.unshift(1),n.push(t);var s=[];for(var c=t+1;c<t+3&&c<=i;c++)s.push(c);t+3<i&&s.push("..."),t+3<=i&&s.push(i);var p="";var m=n.concat(s);for(var f=0;f<m.length;f++)"..."==m[f]?p+=bcSfFilterTemplate.pageItemRemainHtml:p+=m[f]==t?bcSfFilterTemplate.pageItemSelectedHtml:bcSfFilterTemplate.pageItemHtml,p=(p=p.replace(/{{itemTitle}}/g,m[f])).replace(/{{itemUrl}}/g,this.buildToolbarLink("page",t,m[f]));a=a.replace(/{{pageItems}}/g,p),jQ(this.selector.pagination).html(a)}},BCSfFilter.prototype.buildFilterSorting=function(){if(bcSfFilterTemplate.hasOwnProperty("sortingHtml")){jQ(this.selector.topSorting).html("");var e=this.getSortingList();if(e){var t="";for(var i in e)t+='<option value="'+i+'">'+e[i]+"</option>";var a=bcSfFilterTemplate.sortingHtml.replace(/{{sortingItems}}/g,t);jQ(this.selector.topSorting).html(a),jQ(this.selector.topSorting).val(this.queryParams.sort)}}},BCSfFilter.prototype.buildSortingEvent=function(){var e=this;jQ(this.selector.topSorting).change((function(t){onInteractWithToolbar(t,"sort",e.queryParams.sort,jQ(this).val())}))},BCSfFilter.prototype.buildBreadcrumb=function(e,t){if("undefined"!=typeof e&&e.hasOwnProperty("collection")){var i=e.collection;var a='<span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="'+bcSfFilterConfig.shop.url+'" title="'+bcSfFilterConfig.shop.name+'" itemprop="item" class="breadcrumb_link"><span itemprop="name">'+bcSfFilterConfig.label.breadcrumb_home+"</span></a></span> ";a+='<span class="breadcrumb-divider">/</span> '+'<span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="{{currentCollectionLink}}" title="{{currentCollectionTitle}}" itemprop="item" class="breadcrumb_link"><span itemprop="name">{{currentCollectionTitle}}</span></a></span> ';var r="";if(Array.isArray(bcSfFilterConfig.general.current_tags)){var l=bcSfFilterConfig.general.current_tags;for(var n in l){var o=l[n];r+='<span class="breadcrumb-divider">/</span>',r+='<span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="/collections/{{currentCollectionLink}}/'+this.slugify(o)+'" title="'+o+'" itemprop="item"><span itemprop="name">'+o+"</span></a></span>"}}a=(a+=r).replace(/{{currentCollectionLink}}/g,"/collections/"+i.handle).replace(/{{currentCollectionTitle}}/g,i.title),a+=' <span id="bc-sf-filter-top-pagination"></span>',jQ(".breadcrumb_text").html(a)}},BCSfFilter.prototype.buildExtrasProductList=function(e){var t=this;bcSfFilterConfig.custom.quick_shop_enabled&&jQ(t.getSelector("products")).find(".product_image").each((function(e){var t=this;var i=jQ(this).find(" > a").eq(0).attr("href");jQ.ajax({type:"GET",url:i+"?view=bc-sf-quickview",success:function(e){jQ(t).find("div.info").append(e)}})}))},BCSfFilter.prototype.buildSuggestionViewAll=function(e,t,i){var a=this.class.searchSuggestionHeader;var r="";var l=getValueInObjectArray("total_product",t);var n=getValueInObjectArray("suggest_total_product",t);""!==n&&(l=n);var o=this.getSettingValue("search.suggestionBlocks");var s;return l>getValueInObjectArray("products",o,"type","number")&&l>0&&(r+='<li class="'+a+"-view-all "+a+'" aria-label="View All">',r+='<a href="'+this.buildSearchLink(e)+'">'+this.getSettingValue("label.suggestion.viewAll").replace(/{{ count }}/g,l)+"</a>",r+="</li>"),r},BCSfFilter.prototype.buildFilterOptionItem=function(e,t,i,a,r,l,n,o,s,c){var p=!!c.hasOwnProperty("keepValuesStatic")&&c.keepValuesStatic;if("review_ratings"==a&&"text"==this.getSettingValue("general.ratingSelectionStyle"))var m=this.getReviewRatingsLabel(s.from);else var m=this.customizeFilterOptionLabel(t,c.prefix,a);if(!0===p)var f=null;else var f=s.hasOwnProperty("doc_count")?s.doc_count:0;e=(e=(e=e.replace(/{{itemLabel}}/g,this.buildFilterOptionLabel(t,f,c))).replace(/{{itemValue}}/g,encodeURIParamValue(i))).replace(/{{itemTitle}}/g,m),e=this.checkFilterOptionSelected(r,i,a,n)?(e=(e=e.replace(/{{itemSelected}}/g,"selected")).replace(/{{itemLink}}/g,"javascript:;")).replace(/{{itemFunc}}/g,"clearFilterOption(event, this, '"+r+"')"):(e=(e=e.replace(/{{itemLink}}/g,this.buildFilterOptionLink(r,i,a,n,o,p))).replace(/{{itemFunc}}/g,"onInteractWithFilterOptionValue(event, this, '"+a+"', '"+n+"', '"+o+"', '"+p+"')")).replace(/{{itemSelected}}/g,"");var u=jQ(e);return u.children().attr({"data-id":r,"data-value":"collection"==a?encodeURIParamValue(i.split(":")[0]):encodeURIParamValue(i),"data-parent-label":l,"data-title":m,"data-count":f}),this.getSettingValue("general.enableSeo")&&"collection"!=a&&u.children().attr("rel","nofollow"),"collection"==a&&u.children().attr("data-collection-scope",s.key),jQ(u)[0].outerHTML},BCSfFilter.prototype.buildFilterOptionSingleList=function(e,t){var i=this;e.hasOwnProperty("values")&&("all"==e.valueType||this.getSettingValue("general.sortManualValues")||"all"!=e.valueType&&e.sortManualValues)&&(e.values=this.sortFilterOptionValue(e));var a="";var r=e.filterType,l=e.displayType,n=e.selectType,o=e.filterOptionId,s=e.label;var c;if("collection"==e.filterType&&e.activeCollectionAll&&-1==this.findIndexArray("all",e.values,"handle")){var p={doc_count:null,handle:"all",key:0,label:this.getSettingValue("label.collectionAll"),tags:null};e.values.unshift(p)}var m=e.values.filter((function(e){return 1==i.checkFilterOptionSelected(o,e.key,r,l)}));if(m.length>0)a+=this.buildFilterOptionSingleListData(r,o,s,l,n,m[0],e);else for(var f in e.values)a+=this.buildFilterOptionSingleListData(r,o,s,l,n,e["values"][f],e);if(""!=a){var u=this.getTemplate("filterOptionSingleList");u=u.replace(/{{itemList}}/g,a),this.buildFilterOption(u,e,t)}},BCSfFilter.prototype.buildAdditionalElements=function(e){var t=this;jQ(t.getSelector("filterTree")).find("a").attr("data-no-instant",""),jQ(t.getSelector("products")).children().hasClass("product-list")&&jQ(t.getSelector("products")).children().children().unwrap();var i=Math.ceil(e.total_product/this.queryParams.limit);var a='<span class="breadcrumb-divider">/</span> '+bcSfFilterConfig.label.breadcrumb_page.replace(/{{ current_page }}/g,this.queryParams.page).replace(/{{ pages }}/g,i);if(jQ("#bc-sf-filter-top-pagination").html(a),jQ(".load-more__icon").remove(),this.queryParams.hasOwnProperty("pf_t_brand")?(jQ(".bc-sf-filter-option-block-model").css("pointer-events","auto"),1===jQ(".bc-sf-filter-option-block-model .bc-sf-filter-block-title h3").find(".up").length&&jQ(".bc-sf-filter-option-block-model .bc-sf-filter-block-title h3").trigger("click"),this.queryParams.hasOwnProperty("pf_t_model")?(jQ(".bc-sf-filter-option-block-year").css("pointer-events","auto"),1===jQ(".bc-sf-filter-option-block-year .bc-sf-filter-block-title h3").find(".up").length&&jQ(".bc-sf-filter-option-block-year .bc-sf-filter-block-title h3").trigger("click")):(jQ(".bc-sf-filter-option-block-year").css("pointer-events","none"),0===jQ(".bc-sf-filter-option-block-year .bc-sf-filter-block-title h3").find(".up").length&&jQ(".bc-sf-filter-option-block-year .bc-sf-filter-block-title h3").trigger("click"))):(jQ(".bc-sf-filter-option-block-model").css("pointer-events","none"),jQ(".bc-sf-filter-option-block-year").css("pointer-events","none"),0===jQ(".bc-sf-filter-option-block-model .bc-sf-filter-block-title h3").find(".up").length&&jQ(".bc-sf-filter-option-block-model .bc-sf-filter-block-title h3").trigger("click"),0===jQ(".bc-sf-filter-option-block-year .bc-sf-filter-block-title h3").find(".up").length&&jQ(".bc-sf-filter-option-block-year .bc-sf-filter-block-title h3").trigger("click")),this.queryParams.hasOwnProperty("pf_t_brand")&&this.queryParams.hasOwnProperty("pf_t_model")&&this.queryParams.hasOwnProperty("pf_t_year")?(jQ(".bc-sf-filter-custom-button-next").removeAttr("disabled"),e.products.length>0&&jQ(".bc-sf-filter-custom-button-next").click((function(){window.location.replace(t.buildProductItemUrl(e.products[0],!1))}))):$(".bc-sf-filter-custom-button-next").attr("disabled","disabled"),this.isSearchPage()&&this.queryParams.hasOwnProperty("collection_scope")){var r=window.location.search.split("&");(r=r.find((function(e){return-1!==e.indexOf("collection_scope")})))&&(r=r.split("collection_scope=")[1],$("select.bc-select-collection").val(r),$("select.bc-select-collection").change())}},BCSfFilter.prototype.setDefaultParams=function(e){var t=this;e.shop=e.hasOwnProperty("shop")?e.shop:this.shopDomain,e.page=e.hasOwnProperty("page")?parseInt(e.page):1;var i=this.getSettingValue("general.limit");return"default"==this.getSettingValue("general.paginationType")||this.getSettingValue("general.paginationTypeAdvanced")?e.limit=e.hasOwnProperty("limit")?e.limit:i:e.limit=(e.hasOwnProperty("limit")?e.limit:i)*e.page,this.isSearchPage()&&(this.defaultSorting="relevance"),(this.isSearchPage()&&(null===e.q||"string"==typeof e.q&&""===e.q.trim())||!e.hasOwnProperty("q"))&&(this.defaultSorting="best-selling"),e.sort=e.hasOwnProperty("sort")?e.sort:this.defaultSorting,e.display=e.hasOwnProperty("display")?e.display:this.getSettingValue("general.defaultDisplay"),e},BCSfFilter.prototype.buildDefaultElements=function(e){if(bcSfFilterConfig.general.hasOwnProperty("collection_count")&&jQ("#bc-sf-filter-bottom-pagination").length>0){var t=bcSfFilterConfig.general.collection_count,i=parseInt(this.queryParams.page),a=Math.ceil(t/this.queryParams.limit);if(1==a)return jQ(this.selector.pagination).html(""),!1;if("default"==this.getSettingValue("general.paginationType")){var r=bcSfFilterTemplate.paginateHtml,l="";l=(l=i>1?bcSfFilterTemplate.hasOwnProperty("previousActiveHtml")?bcSfFilterTemplate.previousActiveHtml:bcSfFilterTemplate.previousHtml:bcSfFilterTemplate.hasOwnProperty("previousDisabledHtml")?bcSfFilterTemplate.previousDisabledHtml:"").replace(/{{itemUrl}}/g,buildDefaultLink("page",i-1)),r=r.replace(/{{previous}}/g,l);var n="";n=(n=i<a?bcSfFilterTemplate.hasOwnProperty("nextActiveHtml")?bcSfFilterTemplate.nextActiveHtml:bcSfFilterTemplate.nextHtml:bcSfFilterTemplate.hasOwnProperty("nextDisabledHtml")?bcSfFilterTemplate.nextDisabledHtml:"").replace(/{{itemUrl}}/g,buildDefaultLink("page",i+1)),r=r.replace(/{{next}}/g,n);for(var o=[],s=i-1;s>i-3&&s>0;s--)o.unshift(s);i-4>0&&o.unshift("..."),i-4>=0&&o.unshift(1),o.push(i);for(var c=[],p=i+1;p<i+3&&p<=a;p++)c.push(p);i+3<a&&c.push("..."),i+3<=a&&c.push(a);for(var m="",f=o.concat(c),u=0;u<f.length;u++)"..."==f[u]?m+=bcSfFilterTemplate.pageItemRemainHtml:m+=f[u]==i?bcSfFilterTemplate.pageItemSelectedHtml:bcSfFilterTemplate.pageItemHtml,m=(m=m.replace(/{{itemTitle}}/g,f[u])).replace(/{{itemUrl}}/g,buildDefaultLink("page",f[u]));r=r.replace(/{{pageItems}}/g,m),jQ(this.selector.pagination).html(r)}}if(bcSfFilterTemplate.hasOwnProperty("sortingHtml")&&jQ(this.selector.topSorting).length>0){jQ(this.selector.topSorting).html("");var g=this.getSortingList();if(g){var d="";for(var h in g)d+='<option value="'+h+'">'+g[h]+"</option>";var b=bcSfFilterTemplate.sortingHtml.replace(/{{sortingItems}}/g,d);jQ(this.selector.topSorting).html(b);var v=void 0!==this.queryParams.sort_by?this.queryParams.sort_by:this.defaultSorting;jQ(this.selector.topSorting+" select").val(v),jQ(this.selector.topSorting+" select").change((function(e){window.location.href=buildDefaultLink("sort_by",jQ(this).val())}))}}},BCSfFilter.prototype.prepareProductData=function(e){var t=e.length;for(var i=0;i<t;i++){e[i]["images"]=e[i]["images_info"],e[i]["images"].length>0?e[i]["featured_image"]=e[i]["images"][0]:e[i]["featured_image"]={src:bcSfFilterConfig.general.no_image_url,width:"",height:"",aspect_ratio:0},e[i]["url"]="/products/"+e[i].handle;var a=[];var r=e[i]["options_with_values"].length;for(var l=0;l<r;l++)a.push(e[i]["options_with_values"][l]["name"]);if(e[i]["options"]=a,"undefined"!=typeof bcSfFilterConfig.general.currencies&&bcSfFilterConfig.general.currencies.length>1){var n=bcSfFilterConfig.general.current_currency.toLowerCase().trim();function o(e,t){return"undefined"!=typeof t?t:e}e[i].price_min=o(e[i].price_min,e[i]["price_min_"+n]),e[i].price_max=o(e[i].price_max,e[i]["price_max_"+n]),e[i].compare_at_price_min=o(e[i].compare_at_price_min,e[i]["compare_at_price_min_"+n]),e[i].compare_at_price_max=o(e[i].compare_at_price_max,e[i]["compare_at_price_max_"+n])}e[i]["price_min"]*=100,e[i]["price_max"]*=100,e[i]["compare_at_price_min"]*=100,e[i]["compare_at_price_max"]*=100,e[i]["price"]=e[i]["price_min"],e[i]["compare_at_price"]=e[i]["compare_at_price_min"],e[i]["price_varies"]=e[i]["price_min"]!=e[i]["price_max"];var s=e[i]["variants"][0];if(null!==getParam("variant")&&""!=getParam("variant")){var c=e.variants.filter((function(e){return e.id==getParam("variant")}));"undefined"!=typeof c[0]&&(s=c[0])}else{var p=e[i]["variants"].length;for(var l=0;l<p;l++)if(e[i]["variants"][l].available){s=e[i]["variants"][l];break}}e[i]["selected_or_first_available_variant"]=s;var p=e[i]["variants"].length;for(var l=0;l<p;l++){var m=[];var f=1;var u;var g=e[i]["variants"][l]["merged_options"];if(Array.isArray(g)){var d=g.length;for(var h=0;h<d;h++){var b=g[h].split(":");e[i]["variants"][l]["option"+(parseInt(h)+1)]=b[1],e[i]["variants"][l]["option_"+b[0]]=b[1],m.push(b[1])}e[i]["variants"][l]["options"]=m}e[i]["variants"][l]["compare_at_price"]=100*parseFloat(e[i]["variants"][l]["compare_at_price"]),e[i]["variants"][l]["price"]=100*parseFloat(e[i]["variants"][l]["price"])}e[i]["description"]=e[i]["content"]=e[i]["body_html"],e[i].hasOwnProperty("original_tags")&&e[i]["original_tags"].length>0&&(e[i].tags=e[i]["original_tags"].slice(0))}return e},BCSfFilter.prototype.getFilterData=function(e,t){function i(e,t){var i=bcsffilter;var t="undefined"!=typeof t?t:0;i.showLoading(),"function"==typeof i.buildPlaceholderProductList&&i.buildPlaceholderProductList(e),i.beforeGetFilterData(e),i.prepareRequestParams(e),i.queryParams["callback"]="BCSfFilterCallback",i.queryParams["event_type"]=e;var a=i.isSearchPage()?i.getApiUrl("search"):i.getApiUrl("filter");var r=document.createElement("script");r.type="text/javascript";var l=(new Date).getTime();var n,o;r.src=a+"?t="+l+"&"+jQ.param(i.queryParams),r.id="bc-sf-filter-script",r.async=!0,o=2e3,r.addEventListener("error",(function(a){"function"==typeof document.getElementById(r.id).remove?document.getElementById(r.id).remove():document.getElementById(r.id).outerHTML="",t<3?(t++,n&&clearTimeout(n),n=setTimeout(i.getFilterData("resend",t),o)):i.buildDefaultElements(e)})),document.getElementsByTagName("head")[0].appendChild(r),r.onload=function(){"function"==typeof document.getElementById(r.id).remove?document.getElementById(r.id).remove():document.getElementById(r.id).outerHTML=""}}this.requestFilter(i,e,t)},BCSfFilter.prototype.requestFilter=function(e,t,i){e(t,i)},BCSfFilter.prototype.initFilter=function(){return this.isBadUrl()?void(window.location.href=window.location.pathname):(this.updateApiParams(!1),void this.getFilterData("init"))},BCSfFilter.prototype.isBadUrl=function(){try{var e=decodeURIComponent(window.location.search).split("&"),t=!1;if(e.length>0)for(var i=0;i<e.length;i++){var a=e[i],r=(a.match(/</g)||[]).length,l=(a.match(/>/g)||[]).length,n=(a.match(/alert\(/g)||[]).length,o=(a.match(/execCommand/g)||[]).length;if(r>0&&l>0||r>1||l>1||n||o){t=!0;break}}return t}catch(e){return!0}};
//# sourceMappingURL=/s/files/1/0234/7089/9277/t/93/assets/bc-sf-filter.js.map?v=1637903698
